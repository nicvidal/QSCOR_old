{% extends "@QSCOR/Workspace/index.html.twig" %}
{% block menuapplication %}
    <ul class="vertical menu menucanvas menuapplicationindex" data-accordion-menu>
        <li>
            <a href="#" style="color: #FBFCF7">{{ projectname }}</a>
            <ul class="menu vertical is-active" >
                <li{% if app.session.get('routename') == 'networking' %}
                    class="active"
                        {% endif %}>
                    <a href="{{ path('networking',{'projectname' : projectname}) }}" style="font-size: 15px; color: #FBFCF7"><i class="step fi-map" style="font-size: 24px"></i>Networking</a>
                    {% if app.session.get('routename') == 'networking' %}
                        <ul class="menu vertical is-active" >
                            {#<li><a href="#" style="font-size: 15px">Company</a></li>#}
                            {#<li><a href="#" style="font-size: 15px">Type Facility</a></li>#}
                            {#<li><a href="#" style="font-size: 15px">Site</a>#}
                            {#<ul class="menu vertical nested">#}
                            {#<li><a href="#" style="font-size: 15px">Setting Sites</a></li>#}
                            {#<li><a href="#" style="font-size: 15px">Contact Person</a></li>#}
                            {#</ul>#}
                            {#</li>#}

                            {#<li><a href="{{ path('networking',{'projectname' : projectname} ) }}" style="font-size: 15px; color: #FBFCF7">Networking</a>#}
                            {#</li>#}
                            <li><a href="{{ path('company_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Companies</a></li>
                            <li><a href="{{ path('type_facility_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Facilities</a></li>
                            <li class="
                                                {% if app.session.get('routename') == 'modelling' or
                            app.request.attributes.get('_route') == 'site_new' or
                            app.request.attributes.get('_route') == 'site_index' or
                            app.request.attributes.get('_route') == 'site_edit'
                            %}appactive{% endif %}">
                                <a href="{{ path('site_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Sites</a></li>
                            <li><a href="{{ path('flow_site_index', {'projectname': app.request.attributes.get('projectname')}) }}" style="font-size: 13px;color: #FBFCF7">Flow Sites</a></li>
                            <li>

                                <div class="btnnetworking">
                                    <a href="{{ path('networkingmaps', {'projectname': app.request.attributes.get('projectname')}) }}" >
                                        Show Network
                                    </a>
                                </div>
                            </li>

                        </ul>
                    {% endif %}

                </li>
                <li{% if app.session.get('routename') == 'modelling' %}
                    class="active"
                        {% endif %}>
                    <a href="{{ path('modelling',{'projectname' : projectname}) }}" style="font-size: 15px; color: #FBFCF7"><i class="step fi-shuffle" style="font-size: 24px"></i>Modelling</a>
                    {% if app.session.get('routename') == 'modelling' %}
                        <ul class="menu vertical is-active" >
                            <li><a href="{{ path('company_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Companies</a></li>
                            <li><a href="{{ path('type_facility_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Facilities</a></li>
                            <li class="
                                                {% if app.session.get('routename') == 'modelling' or
                            app.request.attributes.get('_route') == 'site_new' or
                            app.request.attributes.get('_route') == 'site_index' or
                            app.request.attributes.get('_route') == 'site_edit'
                            %}appactive{% endif %}">
                                <a href="{{ path('site_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Sites</a></li>
                            <li>

                                <div class="btnnetworking">
                                    <a href="{{ path('modellingprojectschema', {'projectname': app.request.attributes.get('projectname')}) }}" >
                                        Show Modelling for this Project
                                    </a>
                                </div>
                            </li>
                        </ul>
                    {% endif %}

                </li>

                <li{% if app.session.get('routename') == 'performance' %}
                    class="active"
                        {% endif %}>
                    <a href="{{ path('performance',{'projectname' : projectname}) }}" style="font-size: 15px;color: #FBFCF7">
                        <i class="step fi-graph-bar" style="font-size: 24px"></i>Performance
                    </a>
                    {% if app.session.get('routename') == 'performance' %}
                        <ul class="menu vertical is-active" >
                            <li class="{% if app.request.attributes.get('_route') == 'performancemode'
                            %}appactive{% endif %}">
                                <a href="{{ path('performancemode',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Performance Mode</a>
                            </li>
                            <li><a href="{{ path('company_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Companies</a></li>
                            <li><a href="{{ path('type_facility_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Facilities</a></li>
                            <li class="
                                                {% if app.session.get('routename') == 'performance' or
                            app.request.attributes.get('_route') == 'site_new' or
                            app.request.attributes.get('_route') == 'site_index' or
                            app.request.attributes.get('_route') == 'site_edit'
                            %}appactive{% endif %}">
                                <a href="{{ path('site_index',{'projectname':projectname}) }}" style="font-size: 13px; color: #FBFCF7; ">Sites</a></li>
                        </ul>
                    {% endif %}

                </li>

                <li {% if   app.request.attributes.get('_route') == 'project_edit' %}
                    class="active"
                {% endif %}
                ><a href="{{ path('project_edit',{'projectname' : projectname,'id': app.session.get('projectid')| urlencrypt}) }}" style="font-size: 15px;color: #FBFCF7"><i class="step fi-widget" style="font-size: 24px"></i>Settings Projects</a>
                </li>
            </ul>
        </li>


    </ul>
{% endblock %}
{% block workspace %}
    <nav aria-label="You are here:" role="navigation">
        <ul class="breadcrumbs">
            <li><a href="{{ path('site_index',{'projectname': projectname}) }}">sites</a></li>
            {% for performancetype in performancetypes %}
                {% if performancetype.libellePerformance == 'agility'  %}
                    <li>{{ performancetype.libellePerformance }}</li>
                {% else %}
                    <li><a href="{{ path(performancetype.libellePerformance, {'projectname':projectname, 'idsite':site.id|urlencrypt}) }}">{{ performancetype.libellePerformance }}</a></li>
                {% endif %}
            {% endfor %}

        </ul>
    </nav>
    {#{{ dump(performances) }}#}

    {% if performance | length !=0 %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.2/mootools-yui-compressed.js" type="text/javascript"></script>
    <script src="//code.highcharts.com/3.0.10/adapters/mootools-adapter.js" type="text/javascript"></script>
    <script src="//code.highcharts.com/4.1.8/highcharts.js"></script>
    <script src="//code.highcharts.com/4.1.8/modules/exporting.js"></script>
    <script type="text/javascript">
        {#{{ chart(chart, 'mootools') }}#}
        {{ chart(chart1) }}
        {{ chart(chart2) }}

    </script>

    <div id="linechart" style="margin-right: 1rem; margin-bottom: 5rem"></div>
    <div id="linechart2" style="margin-right: 1rem"></div>
    {#<div style="margin-top: 25rem"></div>#}
    {#<script type="text/javascript">#}
        {#{{ chart(chart, 'mootools') }}#}
        {#{{ chart(chart1) }}#}
        {#{{ chart(chart2) }}#}
    {#</script>#}

    <div class="row large-6 large-offset-4" style="margin-top: 1rem">
        <a href="{{ path('performancedelete', {'projectname': projectname, 'idsite': site.id |urlencrypt, 'idperformance' : performance.id}) }}" class="button">
            Delete this performance
        </a>
    </div>
    {% else %}
        {% for performancetype in performancetypes %}
            {%if performancetype.libellePerformance == 'agility'  %}
            <h4>Agility Performance</h4>
            <div class="formModal" style="margin-top: 0">
                <form method="post" action="{{ path('agilitycalcule', {'projectname': projectname, 'idsite': site.id, 'idperformance':performancetype.id}) }}">

                    <div class="Modalrow">

                        <div class="Modallabel">
                            <label> Upside flexibility</label>
                        </div>
                        <div class="Modalwidget">
                            <input type="number" name="uf" min=0  id="uf" value="0" required >
                        </div>
                    </div>

                    <ul class="accordion" data-accordion data-allow-all-closed="true" style="margin-top: 1rem">
                        <li class="accordion-item" data-accordion-item >
                            <a href="#" class="accordion-title"> Calcul Upside flexibility</a>
                            <div class="accordion-content" data-tab-content>
                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside Source Flexibility</label>
                                    </div>
                                    <div class="Modalwidget">

                                        <input type="number" id="val1"  min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside Make Flexibility</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val2" min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside Deliver Flexibility</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val3" min="0" placeholder="insert value in days">
                                    </div>
                                </div>
                                <a style="margin-top: 1rem" class="button" onclick="upsideflexibility()"> calcule this value</a>
                            </div>
                        </li>
                    </ul>

                    <div class="Modalrow">

                        <div class="Modallabel">
                            <label> Upside adaptability</label>
                        </div>
                        <div class="Modalwidget">
                            <input type="number" name="ua" min=0  id="ua" value="0" required >
                        </div>
                    </div>

                    <ul class="accordion" data-accordion data-allow-all-closed="true" style="margin-top: 1rem">
                        <li class="accordion-item" data-accordion-item >
                            <a href="#" class="accordion-title"> Calcul Upside adaptability</a>
                            <div class="accordion-content" data-tab-content>
                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside adaptability Source</label>
                                    </div>
                                    <div class="Modalwidget">

                                        <input type="number" id="val4"  min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside adaptability Make</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val5" min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside adaptability Deliver</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val6" min="0" placeholder="insert value in days">
                                    </div>
                                </div>
                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Upside adaptability Return</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val7" min="0" placeholder="insert value in days">
                                    </div>
                                </div>
                                <a style="margin-top: 1rem" class="button" onclick="upsideadability()"> calcule this value</a>
                            </div>
                        </li>
                    </ul>

                    <div class="Modalrow">

                        <div class="Modallabel">
                            <label> Downside adaptability</label>
                        </div>
                        <div class="Modalwidget">
                            <input type="number" name="da" min=0  id="da" value="0" required >
                        </div>
                    </div>

                    <ul class="accordion" data-accordion data-allow-all-closed="true" style="margin-top: 1rem">
                        <li class="accordion-item" data-accordion-item >
                            <a href="#" class="accordion-title"> Calcul Downside  adaptability</a>
                            <div class="accordion-content" data-tab-content>
                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Downside Source Adaptability</label>
                                    </div>
                                    <div class="Modalwidget">

                                        <input type="number" id="val8"  min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Downside Make Adaptability</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val9" min="0" placeholder="insert value in days">
                                    </div>
                                </div>

                                <div class="Modalrow">

                                    <div class="Modallabel">
                                        <label> Downside Deliver Adaptability</label>
                                    </div>
                                    <div class="Modalwidget">
                                        <input type="number" id="val10" min="0" placeholder="insert value in days">
                                    </div>
                                </div>
                                <a style="margin-top: 1rem" class="button" onclick="downsideadability()"> calcule this value</a>
                            </div>
                        </li>
                    </ul>


                    <div class="Modalrow">

                        <div class="Modallabel">
                            <label> Overall value At Risck</label>
                        </div>
                        <div class="Modalwidget">
                            <input type="number" name="ovr" min=0  id="ovr" value="0" required >
                        </div>
                    </div>

                    <ul class="accordion" data-accordion data-allow-all-closed="true" style="margin-top: 1rem">
                        <li class="accordion-item" data-accordion-item >
                            <a href="#" class="accordion-title"> Calcul Overall valut at risck</a>
                            <div class="accordion-content" data-tab-content>

                                <div class="row">
                                    <div class="text-center" style="color: #FFFFFF"> Plan</div>
                                    <hr>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Probability of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">
                                                <input type="number" id="val11"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Monetized Impact of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">

                                                <input type="number" id="val12"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="text-center" style="color: #FFFFFF"> Source</div>
                                    <hr>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Probability of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">
                                                <input type="number" id="val13"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Monetized Impact of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">

                                                <input type="number" id="val14"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="text-center" style="color: #FFFFFF"> Make</div>
                                    <hr>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Probability of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">
                                                <input type="number" id="val15"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Monetized Impact of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">

                                                <input type="number" id="val16"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="text-center" style="color: #FFFFFF"> Deliver</div>
                                    <hr>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Probability of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">
                                                <input type="number" id="val17"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Monetized Impact of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">

                                                <input type="number" id="val18"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="text-center" style="color: #FFFFFF"> Return</div>
                                    <hr>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Probability of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">
                                                <input type="number" id="val19"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="large-6 columns">
                                        <div class="Modalrow">

                                            <div class="Modallabel">
                                                <label style="font-size: 12px"> Monetized Impact of Risk Event</label>
                                            </div>
                                            <div class="Modalwidget">

                                                <input type="number" id="val20"  min="0" placeholder="insert value in euro">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <a style="margin-top: 1rem" class="button" onclick="overallvalue()"> calcule this value</a>
                            </div>
                        </li>
                    </ul>

                    <input style="margin-top: 1rem" type="submit" value="create" class="button success"  >
                </form>
            {% endif %}
        {% endfor %}
    {% endif %}


        <script type="text/javascript">


            function upsideflexibility(){
                MakeMin(1, 3, 'uf');
            }
            function upsideadability(){
                MakeMin(4, 7, 'ua');
            }

            function downsideadability(){
                MakeMin(8, 10, 'da');
            }
            function MakeMin(depart, arrive, idcontainer){
//            alert('ok');
                var val = 0;
                var uf = [];
                for(i = depart ; i <=arrive; i++){
                    val = document.getElementById('val'+i).value;
                    uf.push(parseInt(val));
                }
                var minuf = Math.min(...uf);
                document.getElementById(idcontainer).value = minuf;
            }


            function overallvalue(){
                var val11 = document.getElementById('val11').value;
                var val12 = document.getElementById('val12').value;
                var val13 = document.getElementById('val13').value;
                var val14 = document.getElementById('val14').value;
                var val15 = document.getElementById('val15').value;
                var val16 = document.getElementById('val16').value;
                var val17 = document.getElementById('val17').value;
                var val18 = document.getElementById('val18').value;
                var val19 = document.getElementById('val19').value;
                var val20 = document.getElementById('val20').value;

                var plan = parseInt(val11) * parseInt(val12);
                var source = parseInt(val13) * parseInt(val14);
                var make = parseInt(val15) * parseInt(val16);
                var deliver = parseInt(val17) * parseInt(val18);
                var returns = parseInt(val19) * parseInt(val20);

                var overallavalue = plan + source + make + deliver + returns;
                document.getElementById('ovr').value = overallavalue;

            }
        </script>
{% endblock %}
